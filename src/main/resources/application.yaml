startpunkt:
  # Default protocol for links if not specified in the resource
  defaultProtocol: "http"

  # Default language for the web UI
  defaultLanguage: "en-US"

  # Application availability checking
  availability:
    enabled: true  # If true, check application availability
    timeout: 5  # Timeout in seconds for availability checks
    interval: 60s  # Interval between availability checks (e.g., 60s, 5m, 1h)
    ignoreCertificates: false  # If true, ignore SSL certificate validation errors (insecure, use only in development)
    # Note: HTTP 2xx, 3xx, and 4xx responses are considered "available" since they indicate the service is responding
    # Only 5xx server errors or connection failures mark a service as unavailable

  # Namespace selector determines which namespaces to look for resources in
  namespaceSelector:
    any: true  # If true, look for resources in all namespaces
    # matchNames:  # Uncomment and specify namespace names to limit the search to specific namespaces
    #   - default
    #   - startpunkt

  # Kubernetes integration, read ingress resources
  ingress:
    enabled: true  # If true, enable the reading of ingress resources
    onlyAnnotated: true  # Only consider resources with the annotation 'startpunkt.ullberg.us/enable: "true"'

  # OpenShift integration, read OpenShift Routes
  openshift:
    enabled: true  # If true, enable the reading of OpenShift Route resources
    onlyAnnotated: true  # Only consider resources with the annotation 'startpunkt.ullberg.us/enable: "true"'

  # Hajimari integration, read Hajimari Applications and Bookmarks
  hajimari:
    enabled: true  # If true, enable the reading of Hajimari Applications and Bookmarks

  # Istio Virtual Service integration, read Istio VirtualService resources
  istio:
    virtualservice:
      enabled: true  # If true, enable the reading of Hajimari Applications and Bookmarks
      onlyAnnotated: true  # Only consider resources with the annotation 'startpunkt.ullberg.us/enable: "true"'

  # GatewayAPI HTTPRoute integration, read GatewayAPI HTTPRoute resources
  gatewayapi:
    httproute:
      enabled: true  # If true, enable the reading of Hajimari Applications and Bookmarks
      onlyAnnotated: true  # Only consider resources with the annotation 'startpunkt.ullberg.us/enable: "true"'

  # Web ui configuration
  web:
    title: "Startpunkt"  # Title of the web UI
    refreshInterval: 60  # Interval in seconds to refresh applications and bookmarks (0 = disabled)
    githubLink:
      enabled: true  # If true, enable the GitHub link in the web UI
    checkForUpdates: true  # If true, check for updates and show a notification in the web UI
    theme:
      light:
        bodyBgColor: "#F8F6F1"
        bodyColor: "#696969"
        emphasisColor: "#000000"
        textPrimaryColor: "#4C432E"
        textAccentColor: "#AA9A73"
      dark:
        bodyBgColor: "#232530"
        bodyColor: "#696969"
        emphasisColor: "#FAB795"
        textPrimaryColor: "#FAB795"
        textAccentColor: "#E95678"

  # WebSocket configuration for real-time updates (DEPRECATED - use GraphQL subscriptions instead)
  websocket:
    enabled: false  # WebSocket support is deprecated, use GraphQL subscriptions
    heartbeatInterval: 30s  # Heartbeat interval (kept for backward compatibility)
    eventDebounceMs: 500  # Debounce time in milliseconds for events

  # GraphQL Subscription configuration for real-time updates
  graphql:
    subscription:
      enabled: true  # If true, enable GraphQL subscriptions for real-time updates

  # Kubernetes watch configuration (using Informers)
  watch:
    enabled: true  # If true, enable Kubernetes informers for real-time cache updates
    # When enabled, the application will use Kubernetes Informers to watch for changes
    # and update the cache automatically, triggering GraphQL subscription notifications
    resyncPeriodSeconds: 300  # Informer resync period in seconds (300 = 5 minutes)
    # Informers automatically resync with Kubernetes API server at this interval,
    # ensuring cache consistency even if events are missed. This replaces the old
    # manual periodic refresh mechanism.

# Quarkus configuration
quarkus:
  # SmallRye GraphQL configuration
  smallrye-graphql:
    ui:
      always-include: true  # Enable GraphiQL in dev mode
    metrics:
      enabled: true  # Enable metrics for GraphQL operations
    tracing:
      enabled: true  # Enable tracing for GraphQL queries
    schema-include-directives: true  # Include directives in schema
    error-extension-fields: ["classification", "code"]  # Include error details in response
    show-runtime-exception-message: ["us.ullberg.startpunkt.graphql.exception.ApplicationConflictException", "us.ullberg.startpunkt.graphql.exception.BookmarkConflictException"]  # Show exception messages for our custom exceptions
    # DO NOT enable GET - it causes issues with named operations
    # http:
    #   get:
    #     enabled: true

  # Cache configuration
  cache:
    caffeine:
      "bing-image-base-cache":
        expire-after-write: 1H  # Cache Bing base URL data for 1 hour

# Logging configuration (uncomment to enable debug logging)
# quarkus:
#   log:
#     level: INFO  # Default log level
#     category:
#       "us.ullberg.startpunkt":
#         level: DEBUG  # Enable debug logging for Startpunkt
